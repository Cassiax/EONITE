<app-navbar></app-navbar>
<div class="w-full flex justify-center">
  <div class="absolute inset-x-0 -z-10 transform-gpu overflow-hidden blur-3xl" aria-hidden="true">
    <div class="relative -z-10 left-[calc(50%-11rem)] aspect-[1155/678] w-[36.125rem] -translate-x-1/2 rotate-[30deg] bg-gradient-to-tr from-[#ff80b5] to-[#9089fc] opacity-30 sm:left-[calc(50%-30rem)] sm:w-[72.1875rem]" style="clip-path: polygon(74.1% 44.1%, 100% 61.6%, 97.5% 26.9%, 85.5% 0.1%, 80.7% 2%, 72.5% 32.5%, 60.2% 62.4%, 52.4% 68.1%, 47.5% 58.3%, 45.2% 34.5%, 27.5% 76.7%, 0.1% 64.9%, 17.9% 100%, 27.6% 76.8%, 76.1% 97.7%, 74.1% 44.1%)"></div>
  </div>
  <div class="m-2 max-w-screen-xl">
    <div class="md:flex">
      <div class="p-4 bg-white shadow-md rounded-lg">
        <div class="flex items-center justify-center font-bold text-xl text-[#5C06E4] mb-2">CART</div>
        <div class="w-[400px] sm:w-[600px] md:w-[800px] lg:w-[1000px] overflow-scroll:visible">
          <table mat-table [dataSource]="data" multiTemplateDataRows matSort>
            <!-- Checkbox Column -->
            <ng-container matColumnDef="image">
              <th mat-header-cell *matHeaderCellDef class="h-[0px]"></th>
              <td mat-cell *matCellDef="let element" class="font-semibold text-[#5C06E4] text-[16px] w-[90px]">
                <img class="ml-5 h-8 w-8 rounded-full" src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80" alt="">
              </td>
            </ng-container>

            <ng-container matColumnDef="name">
              <th mat-header-cell *matHeaderCellDef class="h-[0px]"></th>
              <td mat-cell *matCellDef="let element" class="font-semibold text-[#5C06E4] text-[16px]">
                {{ element['name'] }}
              </td>
            </ng-container>

            <ng-container matColumnDef="action">
              <th mat-header-cell *matHeaderCellDef class="h-[0px]">
              </th>
              <td mat-cell *matCellDef="let element" class="font-semibold text-[#5C06E4] text-[16px]">
                <div class="relative flex items-center justify-end">
                  <button (click)="deleteItem = true" class="md:ml-3 rounded-md px-5 py-2">
                    <svg class="w-6 h-6 mx-auto" aria-hidden="true" fill="gray" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg>
                  </button>
                </div>
              </td>
            </ng-container>

            <ng-container matColumnDef="expandedDetail">
              <td mat-cell *matCellDef="let element" [attr.colspan]="columnsToDisplay.length">
                <div class="example-element-detail">
                  <div style="width: 100%; margin-left: 20px;">
                    <table mat-table [dataSource]="element.addresses" multiTemplateDataRows matSort>
                      <ng-container matColumnDef="select">
                        <th *matHeaderCellDef class="w-[20px]">
                            <mat-checkbox (change)="$event ? UserMasterToggle(element.id) : null"
                                          [checked]="userSelectionMap.get(element.id)?.hasValue() && isAllUserSelected(element.id)"
                                          [indeterminate]="checkIndeterminate(element.id)">
                            </mat-checkbox>
                        </th>
                        <td *matCellDef="let row; let i = index;" >
                            <mat-checkbox (click)="$event.stopPropagation()"
                                          (change)="$event ? userSelectionMap.get(element.id)?.toggle(row) : null"
                                          [checked]="userSelectionMap.get(element.id)?.isSelected(row)">
                            </mat-checkbox>
                        </td>
                      </ng-container>
                      <ng-container matColumnDef="image">
                        <th mat-header-cell *matHeaderCellDef class="md:mx-0 text-[14px] text-[#5C06E4]">
                          <div class="pl-3">
                          Image
                          </div>
                        </th>
                        <td mat-cell *matCellDef="let element" class="w-[120px]">
                          <div class="p-2">
                            <img  class="h-[50px] rounded-md"
                            src="https://flowbite.s3.amazonaws.com/docs/gallery/square/image-1.jpg" alt="">
                          </div>
                        </td>
                      </ng-container>

                      <ng-container matColumnDef="productName">
                        <th mat-header-cell *matHeaderCellDef class="mx-1 md:mx-0 text-[14px] text-[#5C06E4]">Product Name</th>
                        <td mat-cell *matCellDef="let element">
                          {{ element.productName }}
                        </td>
                      </ng-container>

                      <ng-container matColumnDef="qty">
                        <th mat-header-cell *matHeaderCellDef class="mx-1 md:mx-0 text-[14px] text-[#5C06E4]">Qty</th>
                        <td mat-cell *matCellDef="let element">
                          {{ element.qty }}
                        </td>
                      </ng-container>

                      <ng-container matColumnDef="date">
                        <th mat-header-cell *matHeaderCellDef class="hidden md:table-cell text-[14px] text-[#5C06E4]">Booking Date</th>
                        <td mat-cell *matCellDef="let element" class="hidden md:table-cell ">
                          {{ element.date }}
                        </td>
                      </ng-container>

                      <ng-container matColumnDef="price">
                        <th mat-header-cell *matHeaderCellDef class="hidden sm:table-cell mx-1 md:mx-0 text-[14px] text-[#5C06E4]">Price</th>
                        <td mat-cell *matCellDef="let element" class="hidden sm:table-cell">
                          {{ element.price }}
                        </td>
                      </ng-container>

                      <ng-container matColumnDef="action">
                        <th mat-header-cell *matHeaderCellDef class="mx-1 md:mx-0 text-[14px] text-[#5C06E4]">Action</th>
                        <td mat-cell *matCellDef="let element">
                          <div class="flex flex-col md:flex-row items-center space-y-2 my-2 md:my-0 md:space-y-0">
                            <button (click)="openDialogCart(element)" class="rounded-md px-6 md:px-4 py-2 text-white bg-indigo-600 hover:bg-indigo-500">EDIT</button>
                          </div>
                        </td>
                      </ng-container>

                      <tr mat-header-row *matHeaderRowDef="innerDisplayedColumns"></tr>
                      <tr mat-row *matRowDef="let address; columns: innerDisplayedColumns;"
                        [class.example-element-row]="address.comments?.length">
                      </tr>
                    </table>
                  </div>
                </div>
              </td>
            </ng-container>

            <!-- <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr> -->
            <tr mat-row *matRowDef="let element; columns: columnsToDisplay;"
              [class.example-element-row]="element.addresses?.length" [class.example-expanded-row]="element?.expanded"
              (click)="element.expanded = !element?.expanded">
            </tr>
            <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="example-detail-row"></tr>
          </table>
        </div>
        <div class="mt-3 flex items-center justify-center md:justify-end font-bold text-md text-[#5C06E4]">
          <button (click)="this.bookingDialog = true" class="rounded-md px-8 md:px-6 py-3 text-white bg-indigo-600 hover:bg-indigo-500">CHECKOUT</button>
        </div>
      </div>
    </div>
  </div>
</div>
<div *ngIf="openCart">
  <app-dialog-edit-cart (openCart)="closeCart($event)"></app-dialog-edit-cart>
</div>
<div *ngIf="deleteItem" class="bg-gray-200/[.70] overflow-x-hidden fixed z-50 flex justify-center items-center w-full inset-0 h-[calc(100%)]">
  <div class="relative p-4 text-center bg-white rounded-lg shadow sm:p-5">
    <button (click)="deleteItem = false" type="button" class="text-gray-400 absolute top-2.5 right-2.5 bg-transparent hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center" data-modal-toggle="deleteModal">
        <svg aria-hidden="true" class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>
        <span class="sr-only">Close modal</span>
    </button>
    <svg class="text-gray-400 dark:text-gray-500 w-11 h-11 mb-3.5 mx-auto" aria-hidden="true" fill="red" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg>
    <p class="mb-4">Are you sure you want to delete this item?</p>
    <div class="flex justify-center items-center space-x-4">
        <button (click)="deleteItem = false" data-modal-toggle="deleteModal" type="button" class="rounded-md px-7 md:px-5 py-2 text-white bg-indigo-600 hover:bg-indigo-500">
            No, cancel
        </button>
        <button type="submit" class="md:ml-3 rounded-md px-5 py-2 text-white bg-red-600 hover:bg-red-500">
            Yes, I'm sure
        </button>
    </div>
  </div>
</div>
<div *ngIf="bookingDialog">
  <app-dialog-booking (openBooking)="closeBooking($event)"></app-dialog-booking>
</div>
<app-footer></app-footer>

